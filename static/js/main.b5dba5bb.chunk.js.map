{"version":3,"sources":["share/utils.ts","share/data.ts","components/Item.tsx","components/ListItem.tsx","App.tsx","index.tsx"],"names":["randomByRange","min","max","v","Math","random","floor","compare4Sort","a","b","score","animate","_ref","duration","timings","draw","start","performance","now","Promise","resolve","requestAnimationFrame","animateFrame","time","timeFraction","progress","getData","userID","displayName","picture","DivRow","styled","div","_templateObject","props","top","DivNo","_templateObject2","DivPicture","attrs","style","background","_templateObject3","DivName","_templateObject4","DivScore","_templateObject5","Item","_React$Component","_this","Object","classCallCheck","this","_this$props","possibleConstructorReturn","getPrototypeOf","call","index","state","scoreState","indexState","inherits","createClass","key","value","preState","_this2","_this$props2","t","p","setState","round","_this$props3","_this$state","react_default","createElement","backgroundImage","concat","React","Component","Wrap","ListItem_templateObject","ListItem","_getPrototypeOf2","_len","arguments","length","args","Array","_key","apply","intervalId","data","randomUpdateScore","newData","slice","objectSpread","sort","setInterval","clearInterval","map","item","Item_Item","assign","App_templateObject","App","className","App_Wrap","ListItem_ListItem","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.b5dba5bb.chunk.js","sourcesContent":["export const randomByRange = (min: number, max: number) => {\n  const v = Math.random() * (max - min) + min;\n  return Math.floor(v);\n};\n\nexport const compare4Sort = (a: { score: number }, b: { score: number }) => {\n  if (a.score < b.score) {\n    return 1;\n  }\n  if (a.score > b.score) {\n    return -1;\n  }\n  return 0;\n};\n\ntype optionAnimation = {\n  duration: number;\n  timings: (timeFraction: number) => number;\n  draw: (progress: number) => void;\n};\n\nexport function animate({ duration, timings, draw }: optionAnimation) {\n  const start = performance.now();\n  return new Promise(resolve => {\n    requestAnimationFrame(function animateFrame(time) {\n      let timeFraction = (time - start) / duration;\n      if (timeFraction > 1) timeFraction = 1;\n      const progress = timings(timeFraction);\n      draw(progress);\n      if (timeFraction < 1) {\n        requestAnimationFrame(animateFrame);\n      } else {\n        resolve(true);\n      }\n    });\n  });\n}\n","export const getData = () => {\n  return [\n    {\n      userID: '4f4d5462-4a9f-483e-b620-9df9c13ec840',\n      displayName: 'Jone',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_525BEE6E-94B5-4C7F-AB47-1A6F9735EE82.jpg',\n      score: 157000,\n    },\n    {\n      userID: '2c0c5c67-1cfc-4b99-992e-2918b8a0dcc1',\n      displayName: 'Victoria',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_8390066D-46E4-4741-968D-9FF84B276B52.jpg',\n      score: 46200,\n    },\n    {\n      userID: '5100dedb-c2e5-48da-aeaf-83fa49a3482d',\n      displayName: 'Joy',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_CE9F51C5-7006-4DE6-9059-9AEA98F7DF13.jpg',\n      score: 38800,\n    },\n    {\n      userID: '9ece1a05-eb2d-403a-b179-ccbfc0ad9250',\n      displayName: 'Quinn',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_2A847B03-7BE8-4645-B62A-07201A90EDEF.jpg',\n      score: 33400,\n    },\n    {\n      userID: '32afdaac-a83b-481f-bc5a-1e85c3188c6f',\n      displayName: 'Sheenalo',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_95D163ED-6BF8-4D09-897C-B2E5320BE462.jpg',\n      score: 31600,\n    },\n    {\n      userID: 'a2e0bdd3-0aa0-4fc4-91c2-b8ad00d26211',\n      displayName: 'Charlene',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_a943a748-16c8-4afa-87a6-8b6ac0e1f47a.jpg',\n      score: 30800,\n    },\n    {\n      userID: '47a35fbb-ce6b-4c82-9973-2a9391b6478d',\n      displayName: 'LeonaBaby',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_B850B9FF-E1FD-4DFA-8737-E67E32B71B8B.jpg',\n      score: 22300,\n    },\n    {\n      userID: 'db8c493f-0a53-4b5f-8ffe-b0967e076e03',\n      displayName: 'Sunny',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_1A36F357-6EA2-4C77-B26F-588319F26EF2.jpg',\n      score: 17800,\n    },\n    {\n      userID: '44e1f164-831d-4732-8e49-0cda24369000',\n      displayName: 'ImWord',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_4f761f7d-0b85-45dd-90ad-1444c548abd6.jpg',\n      score: 17300,\n    },\n    {\n      userID: '416089f2-f66a-411a-b275-2151d86dcaeb',\n      displayName: 'Dophine',\n      picture:\n        'https://assets-17app.akamaized.net/THUMBNAIL_59946513-FC72-4444-8CC9-991BFFF19C22.jpg',\n      score: 15400,\n    },\n  ];\n};\n","import React from 'react';\nimport styled from 'styled-components';\nimport { animate } from '../share/utils';\n\ntype ItemInterface = {\n  userID: string;\n  picture: string;\n  displayName: string;\n  score: number;\n  index: number;\n};\n\nconst DivRow = styled.div<{ top: number }>`\n  width: 320px;\n  height: 52px;\n  position: absolute;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  top: ${props => props.top}px;\n  border: 1px solid #ccc;\n  :not(:last-child) {\n    border-bottom: none;\n  }\n`;\nconst DivNo = styled.div`\n  width: 50px;\n  padding-left: 10px;\n`;\nconst DivPicture = styled.div.attrs<{ style: string }>(props => ({\n  style: {\n    background: props.style.background,\n  },\n}))`\n  background-size: 100%;\n  width: 36px;\n  height: 36px;\n  border-radius: 18px;\n  border: 2px solid #fff;\n  background-size: cover;\n`;\nconst DivName = styled.div`\n  padding-left: 7px;\n`;\nconst DivScore = styled.div`\n  flex-grow: 1;\n  text-align: right;\n  padding-right: 10px;\n  ::after {\n    content: 'pt';\n  }\n`;\n\nexport class Item extends React.Component<\n  ItemInterface,\n  { scoreState: number; indexState: number }\n> {\n  constructor(props: ItemInterface) {\n    super(props);\n    const { score, index } = this.props;\n    this.state = {\n      scoreState: score,\n      indexState: index,\n    };\n  }\n\n  componentDidUpdate(preState: { score: number; index: number }) {\n    const { score, index } = this.props;\n    if (preState.score !== score) {\n      animate({\n        duration: 300,\n        timings: (t: number) => {\n          return t;\n        },\n        draw: (p: number) => {\n          this.setState({\n            scoreState:\n              preState.score + Math.round(p * (score - preState.score)),\n          });\n        },\n      });\n    }\n\n    if (preState.index !== index) {\n      animate({\n        duration: 300,\n        timings: (t: number) => {\n          return t;\n        },\n        draw: (p: number) => {\n          this.setState({\n            indexState: preState.index + p * (index - preState.index),\n          });\n        },\n      });\n    }\n  }\n\n  render() {\n    const { index, picture, displayName } = this.props;\n    const { scoreState, indexState } = this.state;\n    const top: number = indexState * 50;\n    return (\n      <DivRow top={top}>\n        <DivNo>{index + 1}</DivNo>\n        <DivPicture\n          style={{\n            backgroundImage: `url(${picture}), url(https://webcdn.17app.co/17live/ig-default.svg)`,\n          }}\n        />\n        <DivName>{displayName}</DivName>\n        <DivScore>{scoreState}</DivScore>\n      </DivRow>\n    );\n  }\n}\n\nexport default Item;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { randomByRange, compare4Sort } from '../share/utils';\nimport { getData } from '../share/data';\nimport { Item } from './Item';\n\nconst Wrap = styled.div`\n  margin: 0 auto;\n  width: 320px;\n`;\n\nexport class ListItem extends React.Component {\n  intervalId = 0;\n\n  state = {\n    data: getData(),\n  };\n\n  componentDidMount() {\n    // fetch('https://webcdn.17app.co/campaign/pretest/data.json')\n    //   .then(response => response.json())\n    //   .then(response => {});\n    this.intervalId = setInterval(this.randomUpdateScore, 300);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalId);\n  }\n\n  randomUpdateScore = () => {\n    const { data } = this.state;\n    if (data.length > 0) {\n      const index = randomByRange(0, 10);\n      const newData = data.slice();\n      newData[index].score += randomByRange(200, 500);\n      this.setState(state => {\n        return {\n          ...state,\n          data: newData.sort(compare4Sort),\n        };\n      });\n    }\n  };\n\n  render() {\n    const { data } = this.state;\n    if (data && data.length) {\n      return (\n        <Wrap>\n          {data.map((item, index) => {\n            return <Item key={item.userID} {...item} index={index} />;\n          })}\n        </Wrap>\n      );\n    }\n    return <div>Loading...</div>;\n  }\n}\n\nexport default ListItem;\n","import React from 'react';\nimport styled from 'styled-components';\nimport { ListItem } from './components';\n\nconst Wrap = styled.div`\n  font-size: 1rem;\n  margin: 0;\n  font-family: 'Helvetica Neue', Helvetica, Arial, 'Microsoft JhengHei',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n`;\n\nconst App: React.FC = () => {\n  return (\n    <div className=\"App\">\n      <Wrap>\n        <ListItem />\n      </Wrap>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}